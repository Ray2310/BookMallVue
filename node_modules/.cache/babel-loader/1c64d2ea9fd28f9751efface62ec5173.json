{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"EditGood\",\n  data: function data() {\n    return {\n      goodId: '',\n      schoolId: '',\n      schools: [],\n      stateList: ['在售', '已售', '下架'],\n      good: {\n        img: '',\n        goodName: '',\n        description: '',\n        price: '',\n        state: ''\n      },\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n    };\n  },\n  methods: {\n    //图片上传成功钩子\n    handleAvatarSuccess: function handleAvatarSuccess(res) {\n      this.good.img = res.data;\n    },\n    //提交事件\n    save: function save() {\n      var _this = this;\n\n      this.request.post(\"/api/market/good?schoolId=\" + this.schoolId, this.good).then(function (res) {\n        if (res.code === '200') {\n          _this.$message.success(\"发布成功\");\n        }\n\n        console.log(res);\n      });\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    this.goodId = this.$route.params.goodId;\n    this.request.get(\"/api/market/schools\").then(function (res) {\n      if (res.code === '200') {\n        var schools = res.data;\n        _this2.schools = schools;\n      }\n    }); //获取商品信息\n\n    this.request.get(\"api/market/good/\" + this.goodId).then(function (res) {\n      if (res.code === '200') {\n        _this2.good = res.data;\n      }\n    });\n  },\n  computed: {\n    token: function token() {\n      return {\n        token: this.user.token\n      };\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,gBADA;AAEAC,kBAFA;AAGAC,iBAHA;AAIAC,mCAJA;AAKAC;AACAC,eADA;AAEAC,oBAFA;AAGAC,uBAHA;AAIAC,iBAJA;AAKAC;AALA,OALA;AAYAC;AAZA;AAcA,GAjBA;AAkBAC;AACA;AACAC,uBAFA,+BAEAC,GAFA,EAEA;AACA;AACA,KAJA;AAKA;AACAC,QANA,kBAMA;AAAA;;AACA;AACA;AACA;AACA;;AACAC;AACA,OALA;AAMA;AAbA,GAlBA;AAiCAC,SAjCA,qBAiCA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KALA,EAFA,CAQA;;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA,GA/CA;AAgDAC;AACAC,SADA,mBACA;AACA;AAAAA;AAAA;AACA;AAHA;AAhDA","names":["name","data","goodId","schoolId","schools","stateList","good","img","goodName","description","price","state","user","methods","handleAvatarSuccess","res","save","console","created","computed","token"],"sourceRoot":"src/views/front/market","sources":["EditGood.vue"],"sourcesContent":["<template>\r\n  <el-card class=\"card\">\r\n    <div style=\"text-align: center;margin-bottom: 30px;color: #ffb02a\"><h1>发布商品</h1></div>\r\n\r\n    <el-form label-width=\"60px\" :model=\"good\">\r\n      <el-form-item label=\"学校\">\r\n        <el-select v-model=\"schoolId\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in schools\" :key=\"item.id\" :value=\"item.id\" :label=\"item.name\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"图片\">\r\n        <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"http://localhost:8888/file/upload\"\r\n            :headers=\"token\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleAvatarSuccess\"\r\n        >\r\n          <img v-if=\"good.img\" :src=\"good.img\" class=\"picture\">\r\n\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"商品名\">\r\n        <el-input v-model=\"good.goodName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"描述\">\r\n        <el-input type=\"textarea\" v-model=\"good.description\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"价格\">\r\n        <el-input v-model=\"good.price\" ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\">\r\n        <el-select v-model=\"good.state\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in stateList\" :key=\"item\" :value=\"item\" :label=\"item\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-button type=\"primary\" style=\"margin-left: 190px;margin-top: 20px\" @click=\"save\">确 定</el-button>\r\n    </el-form>\r\n  </el-card>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"EditGood\",\r\n  data(){\r\n    return{\r\n      goodId: '',\r\n      schoolId: '',\r\n      schools:[],\r\n      stateList:['在售','已售','下架'],\r\n      good: {\r\n        img: '',\r\n        goodName: '',\r\n        description: '',\r\n        price: '',\r\n        state: '',\r\n      },\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n    }\r\n  },\r\n  methods:{\r\n    //图片上传成功钩子\r\n    handleAvatarSuccess(res) {\r\n      this.good.img = res.data;\r\n    },\r\n    //提交事件\r\n    save(){\r\n      this.request.post(\"/api/market/good?schoolId=\"+this.schoolId,this.good).then(res=>{\r\n        if(res.code==='200'){\r\n          this.$message.success(\"发布成功\")\r\n        }\r\n        console.log(res)\r\n      })\r\n    },\r\n  },\r\n  created() {\r\n    this.goodId = this.$route.params.goodId\r\n    this.request.get(\"/api/market/schools\").then(res=>{\r\n      if(res.code==='200'){\r\n        let schools = res.data;\r\n        this.schools = schools;\r\n      }\r\n    })\r\n    //获取商品信息\r\n    this.request.get(\"api/market/good/\"+this.goodId).then(res=>{\r\n      if(res.code==='200'){\r\n        this.good = res.data;\r\n      }\r\n    })\r\n  },\r\n  computed:{\r\n    token() {\r\n      return{ token: this.user.token}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card{\r\n  width: 600px;\r\n  margin: 30px auto;\r\n  padding: 30px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  border: #cccccc 1px solid;\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 280px;\r\n  height: 280px;\r\n  line-height: 280px;\r\n  text-align: center;\r\n}\r\n\r\n.picture {\r\n  width: 280px;\r\n  height: 280px;\r\n  display: block;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}