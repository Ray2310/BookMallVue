{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '../../../utils/request';\nimport icons from '@/utils/icons';\nexport default {\n  name: \"Category\",\n  data: function data() {\n    return {\n      options: [],\n      searchText: '',\n      user: {},\n      //从icons.js中引入常量iconStore\n      iconStore: icons.iconStore,\n      icons: [],\n      icon: {},\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  created: function created() {\n    this.user = localStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {};\n    this.load();\n    console.log(this.iconStore);\n  },\n  methods: {\n    load: function load() {\n      var _this = this;\n\n      API.get(\"/api/icon\").then(function (res) {\n        _this.icons = res.data;\n        console.log(_this.icons);\n      });\n    },\n    handleEditCategory: function handleEditCategory(category) {\n      var _this2 = this;\n\n      this.$prompt('请输入修改后的名称', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(function (_ref) {\n        var value = _ref.value;\n        category.name = value;\n\n        _this2.request.post(\"/api/category\", category).then(function (res) {\n          if (res.code === '200') {\n            _this2.$message.success(\"修改成功\");\n          } else {\n            _this2.$message.error(\"修改失败\");\n          }\n        });\n      });\n    },\n    handleEditIcon: function handleEditIcon(icon) {\n      this.icon = JSON.parse(JSON.stringify(icon));\n      this.dialogFormVisible = true;\n    },\n    saveIcon: function saveIcon() {\n      var _this3 = this;\n\n      //删除无用的属性\n      delete this.icon.categories;\n      this.request.post(\"/api/icon\", this.icon).then(function (res) {\n        if (res.code === '200') {\n          _this3.$message.success(\"修改成功\");\n\n          _this3.dialogFormVisible = false;\n        } else {\n          _this3.$message.error(\"修改失败\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,iBADA;AAEAC,oBAFA;AAGAC,cAHA;AAIA;AACAC,gCALA;AAMAC,eANA;AAOAC,cAPA;AAQAC,gBARA;AASAC,iBATA;AAUAC,gBAVA;AAWAC,cAXA;AAYAC;AAZA;AAcA,GAjBA;AAkBAC,SAlBA,qBAkBA;AACA;AACA;AACAC;AACA,GAtBA;AAuBAC;AACAC,QADA,kBACA;AAAA;;AACAC;AACA;AACAH;AACA,OAHA;AAIA,KANA;AAOAI,sBAPA,8BAOAC,QAPA,EAOA;AAAA;;AACA;AACAC,+BADA;AAEAC;AAFA,SAGAC,IAHA,CAGA;AAAA;AACAH;;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SANA;AAOA,OAZA;AAaA,KArBA;AAsBAI,kBAtBA,0BAsBAhB,IAtBA,EAsBA;AACA;AACA;AACA,KAzBA;AA0BAiB,YA1BA,sBA0BA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA;AArCA;AAvBA","names":["name","data","options","searchText","user","iconStore","icons","icon","pageNum","pageSize","entity","total","dialogFormVisible","created","console","methods","load","API","handleEditCategory","category","confirmButtonText","cancelButtonText","then","handleEditIcon","saveIcon"],"sourceRoot":"src/views/manage/good","sources":["Category.vue"],"sourcesContent":["<template>\r\n  <div >\r\n    <div style=\"width: 60%;margin: 30px auto\">\r\n      <el-table :data=\"icons\"  stripe >\r\n        <!--      下级分类表-->\r\n        <el-table-column type=\"expand\" label=\"下级分类\" width=\"100px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-table :data=\"scope.row.categories\" :header-cell-style=\"{background:'#cbefea',color: 'black'}\" >\r\n              <el-table-column label=\"分类id\" prop=\"id\"></el-table-column>\r\n              <el-table-column label=\"分类名称\" prop=\"name\"></el-table-column>\r\n              <el-table-column label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button type=\"primary\" size=\"mini\" @click=\"handleEditCategory(scope.row)\">修改</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </template>\r\n          <!---->\r\n        </el-table-column>\r\n        <el-table-column label=\"id\" prop=\"id\" width=\"60px\"></el-table-column>\r\n        <el-table-column label=\"icon\">\r\n          <template slot-scope=\"scope\">\r\n            <i class=\"iconfont\" v-html=\"scope.row.value\"></i>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n            fixed=\"right\"\r\n            label=\"操作\"\r\n            width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" circle  @click=\"handleEditIcon(scope.row)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n<!--icon修改弹窗-->\r\n    <el-dialog title=\"修改图标\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"icon\">\r\n        <el-form-item label=\"图标\" label-width=\"100px\">\r\n          <i class=\"iconfont\" v-html=\"icon.value\"></i>\r\n        </el-form-item>\r\n        <el-form-item label=\"更改图标\" label-width=\"100px\">\r\n          <el-select  placeholder=\"请选择图标\"  v-model=\"icon.value\">\r\n            <el-option v-for=\"item in iconStore\" :value=\"item\"  :key=\"item\">\r\n              <i class=\"iconfont\" v-html=\"item\"></i>\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveIcon\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../../../utils/request'\r\nimport icons from '@/utils/icons'\r\nexport default {\r\n  name: \"Category\",\r\n  data() {\r\n    return {\r\n      options: [],\r\n      searchText: '',\r\n      user: {},\r\n      //从icons.js中引入常量iconStore\r\n      iconStore: icons.iconStore,\r\n      icons: [],\r\n      icon: {},\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      entity: {},\r\n      total: 0,\r\n      dialogFormVisible: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.user = localStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {}\r\n    this.load()\r\n    console.log(this.iconStore)\r\n  },\r\n  methods: {\r\n    load() {\r\n       API.get(\"/api/icon\").then(res => {\r\n          this.icons = res.data\r\n         console.log(this.icons)\r\n       })\r\n    },\r\n    handleEditCategory(category){\r\n      this.$prompt('请输入修改后的名称', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n      }).then(({ value }) => {\r\n        category.name = value;\r\n        this.request.post(\"/api/category\",category).then(res=>{\r\n          if(res.code === '200'){\r\n            this.$message.success(\"修改成功\")\r\n          }else{\r\n            this.$message.error(\"修改失败\")\r\n          }\r\n        })\r\n      })\r\n    },\r\n    handleEditIcon(icon){\r\n      this.icon = JSON.parse(JSON.stringify(icon));\r\n      this.dialogFormVisible = true;\r\n    },\r\n    saveIcon(){\r\n      //删除无用的属性\r\n      delete this.icon.categories\r\n      this.request.post(\"/api/icon\",this.icon).then(res=>{\r\n        if(res.code==='200'){\r\n          this.$message.success(\"修改成功\");\r\n          this.dialogFormVisible=false;\r\n        }else{\r\n          this.$message.error(\"修改失败\")\r\n        }\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../../resource/css/icon.css\";\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}