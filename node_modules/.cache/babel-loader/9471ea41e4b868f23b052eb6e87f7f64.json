{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nexport var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\n\nfunction getTextWidthMap(mapStr) {\n  var map = {};\n\n  if (typeof JSON === 'undefined') {\n    return map;\n  }\n\n  for (var i = 0; i < mapStr.length; i++) {\n    var char = String.fromCharCode(i + 32);\n    var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n    map[char] = size;\n  }\n\n  return map;\n}\n\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n  createCanvas: function createCanvas() {\n    return typeof document !== 'undefined' && document.createElement('canvas');\n  },\n  measureText: function () {\n    var _ctx;\n\n    var _cachedFont;\n\n    return function (text, font) {\n      if (!_ctx) {\n        var canvas = platformApi.createCanvas();\n        _ctx = canvas && canvas.getContext('2d');\n      }\n\n      if (_ctx) {\n        if (_cachedFont !== font) {\n          _cachedFont = _ctx.font = font || DEFAULT_FONT;\n        }\n\n        return _ctx.measureText(text);\n      } else {\n        text = text || '';\n        font = font || DEFAULT_FONT;\n        var res = /(\\d+)px/.exec(font);\n        var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;\n        var width = 0;\n\n        if (font.indexOf('mono') >= 0) {\n          width = fontSize * text.length;\n        } else {\n          for (var i = 0; i < text.length; i++) {\n            var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n            width += preCalcWidth == null ? fontSize : preCalcWidth * fontSize;\n          }\n        }\n\n        return {\n          width: width\n        };\n      }\n    };\n  }(),\n  loadImage: function loadImage(src, onload, onerror) {\n    var image = new Image();\n    image.onload = onload;\n    image.onerror = onerror;\n    image.src = src;\n    return image;\n  }\n};\nexport function setPlatformAPI(newPlatformApis) {\n  for (var key in platformApi) {\n    if (newPlatformApis[key]) {\n      platformApi[key] = newPlatformApis[key];\n    }\n  }\n}","map":{"version":3,"sources":["/home/rayce/Udatabase/study/ElectronicMall/BookVue/node_modules/zrender/lib/core/platform.js"],"names":["DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","JSON","i","length","char","String","fromCharCode","size","charCodeAt","DEFAULT_TEXT_WIDTH_MAP","platformApi","createCanvas","document","createElement","measureText","_ctx","_cachedFont","text","font","canvas","getContext","res","exec","fontSize","width","indexOf","preCalcWidth","loadImage","src","onload","onerror","image","Image","setPlatformAPI","newPlatformApis","key"],"mappings":"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","sourcesContent":["export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /(\\d+)px/.exec(font);\n                var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}