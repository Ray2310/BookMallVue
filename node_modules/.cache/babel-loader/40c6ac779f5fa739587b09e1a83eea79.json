{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Navagation from \"@/components/Navagation\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Front\",\n  data: function data() {\n    return {\n      user: {},\n      role: 'user',\n      loginStatus: false\n    };\n  },\n  methods: {\n    getUser: function getUser() {\n      var _this = this;\n\n      var username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\";\n\n      if (username) {\n        // 从后台获取User数据\n        this.request.get(\"/userinfo/\" + username).then(function (res) {\n          // 重新赋值后台的最新User数据\n          _this.user = res.data;\n          console.log(_this.user.role);\n        });\n      }\n    }\n  },\n  components: {\n    Navagation: Navagation\n  },\n  created: function created() {\n    var _this2 = this;\n\n    if (localStorage.getItem(\"user\")) {\n      request.post(\"http://localhost:8888/role\").then(function (res) {\n        if (res.code === '200') {\n          _this2.role = res.data;\n\n          if (localStorage.getItem(\"user\")) {\n            _this2.user = JSON.parse(localStorage.getItem(\"user\"));\n            _this2.loginStatus = true;\n          }\n        } else {\n          _this2.user = {\n            nickname: '您未登录',\n            avatarUrl: null\n          };\n          localStorage.removeItem('user');\n          _this2.loginStatus = false;\n        }\n      });\n    } else {\n      this.user = {\n        nickname: '您未登录',\n        avatarUrl: null\n      };\n      this.loginStatus = false;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AAEA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC,cADA;AAEAC,kBAFA;AAGAC;AAHA;AAKA,GARA;AASAC;AACAC,WADA,qBACA;AAAA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACAC;AACA,SAJA;AAKA;AAEA;AAZA,GATA;AAyBAC;AACAC;AADA,GAzBA;AA4BAC,SA5BA,qBA4BA;AAAA;;AACA;AACAC;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AAAAC;AAAAC;AAAA;AACAC;AACA;AACA;AACA,OAZA;AAaA,KAdA,MAcA;AACA;AAAAF;AAAAC;AAAA;AACA;AACA;AAEA;AAhDA","names":["name","data","user","role","loginStatus","methods","getUser","console","components","Navagation","created","request","nickname","avatarUrl","localStorage"],"sourceRoot":"src/views/front","sources":["Front.vue"],"sourcesContent":["<!--\r\n * @Description: \r\n * @Author: Rabbiter\r\n * @Date: 2023-03-26 15:27:05\r\n-->\r\n<template>\r\n  <el-container style=\"height: 100%;width:100%;\">\r\n    <el-header style=\"background-color: white\">\r\n      <Navagation :user=\"user\"\r\n                  :role=\"role\"\r\n                  :login-status=\"loginStatus\"\r\n      ></Navagation>\r\n    </el-header>\r\n\r\n\r\n    <el-main style=\"background-color: lightgrey;\">\r\n\r\n      <router-view />\r\n    </el-main>\r\n\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Navagation from \"@/components/Navagation\";\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"Front\",\r\n  data(){\r\n    return{\r\n      user:{},\r\n      role: 'user',\r\n      loginStatus: false,\r\n    }\r\n  },\r\n  methods: {\r\n    getUser() {\r\n      let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\"\r\n      if (username) {\r\n        // 从后台获取User数据\r\n        this.request.get(\"/userinfo/\" + username).then(res => {\r\n          // 重新赋值后台的最新User数据\r\n          this.user = res.data\r\n          console.log(this.user.role)\r\n        })\r\n      }\r\n\r\n    },\r\n  },\r\n\r\n\r\n  components:{\r\n    Navagation,\r\n  },\r\n  created() {\r\n    if(localStorage.getItem(\"user\")){\r\n      request.post(\"http://localhost:8888/role\").then(res=> {\r\n        if (res.code === '200') {\r\n          this.role = res.data;\r\n          if (localStorage.getItem(\"user\")) {\r\n            this.user = JSON.parse(localStorage.getItem(\"user\"));\r\n            this.loginStatus = true;\r\n          }\r\n        } else {\r\n          this.user = {nickname: '您未登录', avatarUrl: null};\r\n          localStorage.removeItem('user')\r\n          this.loginStatus = false;\r\n        }\r\n      })\r\n    }else{\r\n      this.user = {nickname: '您未登录', avatarUrl: null};\r\n      this.loginStatus = false;\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../resource/css/search.css\";\r\n.image {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}