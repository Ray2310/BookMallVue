{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"OrderItem\",\n  props: {\n    order: Object\n  },\n  created: function created() {\n    console.log(this.order);\n  },\n  data: function data() {\n    return {\n      address: '电话:' + this.order.link_phone + ' 地址:' + this.order.link_address,\n      baseApi: this.$store.state.baseApi\n    };\n  },\n  methods: {\n    //跳转到支付页面\n    pay: function pay() {\n      this.$router.push({\n        path: 'pay',\n        query: {\n          money: this.order.total_price,\n          orderNo: this.order.order_no\n        }\n      });\n    },\n    //确认收货\n    receive: function receive() {\n      var _this = this;\n\n      this.$confirm('是否确认收货?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(function () {\n        _this.request.get(\"/api/order/received/\" + _this.order.order_no).then(function (res) {\n          if (res.code === '200') {\n            _this.$message.success(\"收货成功\");\n\n            _this.order.state = '已收货';\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACAA,mBADA;AAEAC;AACAC;AADA,GAFA;AAKAC,SALA,qBAKA;AACAC;AACA,GAPA;AAQAC,MARA,kBAQA;AACA;AACAC,+EADA;AAEAC;AAFA;AAIA,GAbA;AAcAC;AACA;AACAC,OAFA,iBAEA;AACA;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AAAA;AACA,KAJA;AAKA;AACAC,WANA,qBAMA;AAAA;;AAEA;AACAC,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AAEA;AACA;AACA;;AACA;AACA;AACA,SALA;AAMA,OAZA;AAcA;AAtBA;AAdA","names":["name","props","order","created","console","data","address","baseApi","methods","pay","path","query","money","orderNo","receive","confirmButtonText","cancelButtonText","type","then"],"sourceRoot":"src/components","sources":["OrderItem.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <div class=\"header\">\r\n    <span style=\"line-height: 40px\">{{order.create_time}}</span>\r\n    <span style=\"line-height: 40px;margin-left: 30px\">订单编号： {{order.order_no}}</span>\r\n  </div>\r\n  <div class=\"body\">\r\n    <div style=\"display: inline-block;margin-right: 20px\">\r\n      <router-link :to=\"'goodview/'+order.good_id\">\r\n        <img :src=\"baseApi order.imgs\" style=\"width: 100px;height:100px\">\r\n      </router-link>\r\n    </div>\r\n    <div style=\"display: inline-block;line-height: 40px\" >\r\n      <table>\r\n        <tr>\r\n          <th>商品</th>\r\n          <th>规格</th>\r\n          <th>数量</th>\r\n          <th>总价</th>\r\n          <th>收货人</th>\r\n          <th>订单状态</th>\r\n        </tr>\r\n        <tr>\r\n          <a :href=\"'goodview/'+order.good_id\">\r\n            <td>{{order.good_name}}</td>\r\n          </a>\r\n          <td>{{order.standard}}</td>\r\n          <td>{{order.count}}</td>\r\n          <td>{{order.total_price}}</td>\r\n          <el-popover\r\n              placement=\"bottom-start\"\r\n              width=\"200\"\r\n              trigger=\"hover\"\r\n              :content=address>\r\n            <td slot=\"reference\" style=\"color: #42b983\">{{ order.link_user }}</td>\r\n          </el-popover>\r\n<!--          订单状态-->\r\n          <template v-if=\"order.state==='已发货'\">\r\n            <td style=\"color: #42b983\">{{order.state}}</td>\r\n            <td>\r\n              <el-button style=\"margin-left: 20px;\" size=\"mini\" type=\"primary\" @click=\"receive\">确认收货</el-button>\r\n            </td>\r\n          </template>\r\n\r\n          <template v-else-if=\"order.state==='已收货'\">\r\n            <td style=\"color: #42b983\"><a class=\"el-icon-check\"></a>{{order.state}}</td>\r\n          </template>\r\n\r\n          <template v-else-if=\"order.state==='已支付'\">\r\n            <td style=\"color: #3b62f8\"> {{order.state}}</td>\r\n            <td>\r\n              <el-button size=\"mini\" type=\"info\" plain disabled>等待发货</el-button>\r\n            </td>\r\n          </template>\r\n\r\n          <template v-else>\r\n            <td>{{order.state}}</td>\r\n            <td>\r\n              <el-button style=\"margin-left: 20px\" size=\"mini\" type=\"success\" @click=\"pay\">去支付</el-button>\r\n            </td>\r\n          </template>\r\n\r\n        </tr>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"OrderItem\",\r\n  props:{\r\n    order: Object,\r\n  },\r\n  created() {\r\n    console.log(this.order)\r\n  },\r\n  data(){\r\n    return{\r\n      address: '电话:'+this.order.link_phone+' 地址:'+this.order.link_address,\r\n      baseApi: this.$store.state.baseApi,\r\n    }\r\n  },\r\n  methods:{\r\n    //跳转到支付页面\r\n    pay(){\r\n      this.$router.push({path: 'pay',query:{money: this.order.total_price,orderNo: this.order.order_no}})\r\n    },\r\n    //确认收货\r\n    receive(){\r\n\r\n      this.$confirm('是否确认收货?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'info'\r\n      }).then(() => {\r\n\r\n        this.request.get(\"/api/order/received/\"+this.order.order_no).then(res=>{\r\n          if(res.code==='200'){\r\n            this.$message.success(\"收货成功\");\r\n            this.order.state='已收货'\r\n          }\r\n        })\r\n      })\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.header{\r\n  background-color: #daf3ff;\r\n  height: 40px;\r\n}\r\n.body{\r\n  background-color: white;\r\n  padding: 20px;\r\n}\r\nth,td{\r\n\r\n  width: 120px;\r\n  text-align: center;\r\n}\r\nth{\r\n  font-size: 15px;\r\n  color: #00b7ff;\r\n  font-weight: normal;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}