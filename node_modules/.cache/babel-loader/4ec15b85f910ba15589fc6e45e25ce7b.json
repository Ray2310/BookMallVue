{"ast":null,"code":"import \"core-js/modules/es.array.fill.js\";\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend, isNumber } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTrasition.js';\n\nvar _Symbol =\n/** @class */\nfunction (_super) {\n  __extends(_Symbol2, _super);\n\n  function _Symbol2(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  _Symbol2.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\r\n   * Stop animation\r\n   * @param {boolean} toLastFrame\r\n   */\n\n\n  _Symbol2.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n\n  _Symbol2.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\r\n   * FIXME:\r\n   * Caution: This method breaks the encapsulation of this module,\r\n   * but it indeed brings convenience. So do not use the method\r\n   * unless you detailedly know all the implements of `Symbol`,\r\n   * especially animation.\r\n   *\r\n   * Get symbol path element.\r\n   */\n\n\n  _Symbol2.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\r\n   * Highlight symbol\r\n   */\n\n\n  _Symbol2.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\r\n   * Downplay symbol\r\n   */\n\n\n  _Symbol2.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\r\n   * @param {number} zlevel\r\n   * @param {number} z\r\n   */\n\n\n  _Symbol2.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  _Symbol2.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\r\n   * Update symbol properties\r\n   */\n\n\n  _Symbol2.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n\n    var symbolSize = _Symbol2.getSymbolSize(data, idx);\n\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n\n  _Symbol2.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(isNumber(hoverScale) ? hoverScale : 1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  _Symbol2.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  _Symbol2.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function cb() {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  _Symbol2.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n\n  return _Symbol2;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default _Symbol;","map":{"version":3,"sources":["D:/Work/WorkSpace/GitWorkSpace/TenShop/resource/ElectronicMall/src/qingge-Market/qingge-vue/node_modules/echarts/lib/chart/helper/Symbol.js"],"names":["__extends","createSymbol","normalizeSymbolOffset","normalizeSymbolSize","graphic","getECData","enterEmphasis","leaveEmphasis","toggleHoverEmphasis","getDefaultLabel","extend","isNumber","setLabelStyle","getLabelStatesModels","ZRImage","saveOldStyle","Symbol","_super","data","idx","seriesScope","opts","_this","call","updateData","prototype","_createSymbol","symbolType","symbolSize","keepAspect","removeAll","symbolPath","attr","z2","culling","scaleX","scaleY","drift","driftSymbol","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolType","getSymbolPath","highlight","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","getItemVisual","seriesModel","hostModel","getSymbolSize","isInit","disableAnimation","target","updateProps","_updateCommon","_sizeX","_sizeY","style","opacity","initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","emphasisDisabled","labelStatesModels","hoverScale","cursorStyle","hasItemOption","itemModel","getItemModel","emphasisModel","getModel","getItemStyle","get","getShallow","symbolRotate","Math","PI","symbolOffset","x","y","symbolStyle","visualColor","fill","pathStyle","useStyle","image","width","height","__isEmptyBrush","decal","setColor","symbolInnerColor","strokeNoScale","liftZ","z2Origin","_z2","useNameLabel","labelFetcher","labelDataIndex","defaultText","getLabelDefaultText","inheritColor","defaultOpacity","getName","emphasisState","ensureState","scaleRatio","max","setSymbolScale","scale","fadeOut","cb","opt","dataIndex","animationOpt","animation","fadeLabel","textContent","getTextContent","removeElement","removeOpt","removeTextContent","Group","dx","dy","parent"],"mappings":";;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,YAAT,EAAuBC,qBAAvB,EAA8CC,mBAA9C,QAAyE,sBAAzE;AACA,OAAO,KAAKC,OAAZ,MAAyB,uBAAzB;AACA,SAASC,SAAT,QAA0B,0BAA1B;AACA,SAASC,aAAT,EAAwBC,aAAxB,EAAuCC,mBAAvC,QAAkE,sBAAlE;AACA,SAASC,eAAT,QAAgC,kBAAhC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,0BAAjC;AACA,SAASC,aAAT,EAAwBC,oBAAxB,QAAoD,2BAApD;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,SAASC,YAAT,QAA6B,mCAA7B;;AAEA,IAAIC,OAAM;AACV;AACA,UAAUC,MAAV,EAAkB;AAChBjB,EAAAA,SAAS,CAACgB,QAAD,EAASC,MAAT,CAAT;;AAEA,WAASD,QAAT,CAAgBE,IAAhB,EAAsBC,GAAtB,EAA2BC,WAA3B,EAAwCC,IAAxC,EAA8C;AAC5C,QAAIC,KAAK,GAAGL,MAAM,CAACM,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AAEAD,IAAAA,KAAK,CAACE,UAAN,CAAiBN,IAAjB,EAAuBC,GAAvB,EAA4BC,WAA5B,EAAyCC,IAAzC;;AAEA,WAAOC,KAAP;AACD;;AAEDN,EAAAA,QAAM,CAACS,SAAP,CAAiBC,aAAjB,GAAiC,UAAUC,UAAV,EAAsBT,IAAtB,EAA4BC,GAA5B,EAAiCS,UAAjC,EAA6CC,UAA7C,EAAyD;AACxF;AACA,SAAKC,SAAL,GAFwF,CAEtE;AAClB;AACA;AACA;AACA;AACA;;AAEA,QAAIC,UAAU,GAAG9B,YAAY,CAAC0B,UAAD,EAAa,CAAC,CAAd,EAAiB,CAAC,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,IAA3B,EAAiCE,UAAjC,CAA7B;AACAE,IAAAA,UAAU,CAACC,IAAX,CAAgB;AACdC,MAAAA,EAAE,EAAE,GADU;AAEdC,MAAAA,OAAO,EAAE,IAFK;AAGdC,MAAAA,MAAM,EAAEP,UAAU,CAAC,CAAD,CAAV,GAAgB,CAHV;AAIdQ,MAAAA,MAAM,EAAER,UAAU,CAAC,CAAD,CAAV,GAAgB;AAJV,KAAhB,EAVwF,CAepF;;AAEJG,IAAAA,UAAU,CAACM,KAAX,GAAmBC,WAAnB;AACA,SAAKC,WAAL,GAAmBZ,UAAnB;AACA,SAAKa,GAAL,CAAST,UAAT;AACD,GApBD;AAqBA;AACF;AACA;AACA;;;AAGEf,EAAAA,QAAM,CAACS,SAAP,CAAiBgB,mBAAjB,GAAuC,UAAUC,WAAV,EAAuB;AAC5D,SAAKC,OAAL,CAAa,CAAb,EAAgBC,aAAhB,CAA8B,IAA9B,EAAoCF,WAApC;AACD,GAFD;;AAIA1B,EAAAA,QAAM,CAACS,SAAP,CAAiBoB,aAAjB,GAAiC,YAAY;AAC3C,WAAO,KAAKN,WAAZ;AACD,GAFD;AAGA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGEvB,EAAAA,QAAM,CAACS,SAAP,CAAiBqB,aAAjB,GAAiC,YAAY;AAC3C,WAAO,KAAKH,OAAL,CAAa,CAAb,CAAP;AACD,GAFD;AAGA;AACF;AACA;;;AAGE3B,EAAAA,QAAM,CAACS,SAAP,CAAiBsB,SAAjB,GAA6B,YAAY;AACvCzC,IAAAA,aAAa,CAAC,KAAKqC,OAAL,CAAa,CAAb,CAAD,CAAb;AACD,GAFD;AAGA;AACF;AACA;;;AAGE3B,EAAAA,QAAM,CAACS,SAAP,CAAiBuB,QAAjB,GAA4B,YAAY;AACtCzC,IAAAA,aAAa,CAAC,KAAKoC,OAAL,CAAa,CAAb,CAAD,CAAb;AACD,GAFD;AAGA;AACF;AACA;AACA;;;AAGE3B,EAAAA,QAAM,CAACS,SAAP,CAAiBwB,IAAjB,GAAwB,UAAUC,MAAV,EAAkBC,CAAlB,EAAqB;AAC3C,QAAIpB,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;AACAZ,IAAAA,UAAU,CAACmB,MAAX,GAAoBA,MAApB;AACAnB,IAAAA,UAAU,CAACoB,CAAX,GAAeA,CAAf;AACD,GAJD;;AAMAnC,EAAAA,QAAM,CAACS,SAAP,CAAiB2B,YAAjB,GAAgC,UAAUC,SAAV,EAAqB;AACnD,QAAItB,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;AACAZ,IAAAA,UAAU,CAACsB,SAAX,GAAuBA,SAAvB;AACAtB,IAAAA,UAAU,CAACuB,MAAX,GAAoBD,SAAS,GAAG,MAAH,GAAYtB,UAAU,CAACuB,MAApD;AACD,GAJD;AAKA;AACF;AACA;;;AAGEtC,EAAAA,QAAM,CAACS,SAAP,CAAiBD,UAAjB,GAA8B,UAAUN,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkCC,IAAlC,EAAwC;AACpE,SAAKkC,MAAL,GAAc,KAAd;AACA,QAAI5B,UAAU,GAAGT,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,QAAxB,KAAqC,QAAtD;AACA,QAAIsC,WAAW,GAAGvC,IAAI,CAACwC,SAAvB;;AACA,QAAI9B,UAAU,GAAGZ,QAAM,CAAC2C,aAAP,CAAqBzC,IAArB,EAA2BC,GAA3B,CAAjB;;AACA,QAAIyC,MAAM,GAAGjC,UAAU,KAAK,KAAKY,WAAjC;AACA,QAAIsB,gBAAgB,GAAGxC,IAAI,IAAIA,IAAI,CAACwC,gBAApC;;AAEA,QAAID,MAAJ,EAAY;AACV,UAAI/B,UAAU,GAAGX,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,kBAAxB,CAAjB;;AAEA,WAAKO,aAAL,CAAmBC,UAAnB,EAA+BT,IAA/B,EAAqCC,GAArC,EAA0CS,UAA1C,EAAsDC,UAAtD;AACD,KAJD,MAIO;AACL,UAAIE,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;AACAZ,MAAAA,UAAU,CAACwB,MAAX,GAAoB,KAApB;AACA,UAAIO,MAAM,GAAG;AACX3B,QAAAA,MAAM,EAAEP,UAAU,CAAC,CAAD,CAAV,GAAgB,CADb;AAEXQ,QAAAA,MAAM,EAAER,UAAU,CAAC,CAAD,CAAV,GAAgB;AAFb,OAAb;AAIAiC,MAAAA,gBAAgB,GAAG9B,UAAU,CAACC,IAAX,CAAgB8B,MAAhB,CAAH,GAA6B1D,OAAO,CAAC2D,WAAR,CAAoBhC,UAApB,EAAgC+B,MAAhC,EAAwCL,WAAxC,EAAqDtC,GAArD,CAA7C;AACAJ,MAAAA,YAAY,CAACgB,UAAD,CAAZ;AACD;;AAED,SAAKiC,aAAL,CAAmB9C,IAAnB,EAAyBC,GAAzB,EAA8BS,UAA9B,EAA0CR,WAA1C,EAAuDC,IAAvD;;AAEA,QAAIuC,MAAJ,EAAY;AACV,UAAI7B,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;;AAEA,UAAI,CAACkB,gBAAL,EAAuB;AACrB,YAAIC,MAAM,GAAG;AACX3B,UAAAA,MAAM,EAAE,KAAK8B,MADF;AAEX7B,UAAAA,MAAM,EAAE,KAAK8B,MAFF;AAGXC,UAAAA,KAAK,EAAE;AACL;AACAC,YAAAA,OAAO,EAAErC,UAAU,CAACoC,KAAX,CAAiBC;AAFrB;AAHI,SAAb;AAQArC,QAAAA,UAAU,CAACI,MAAX,GAAoBJ,UAAU,CAACK,MAAX,GAAoB,CAAxC;AACAL,QAAAA,UAAU,CAACoC,KAAX,CAAiBC,OAAjB,GAA2B,CAA3B;AACAhE,QAAAA,OAAO,CAACiE,SAAR,CAAkBtC,UAAlB,EAA8B+B,MAA9B,EAAsCL,WAAtC,EAAmDtC,GAAnD;AACD;AACF;;AAED,QAAI0C,gBAAJ,EAAsB;AACpB;AACA,WAAKlB,OAAL,CAAa,CAAb,EAAgBC,aAAhB,CAA8B,OAA9B;AACD;AACF,GA/CD;;AAiDA5B,EAAAA,QAAM,CAACS,SAAP,CAAiBuC,aAAjB,GAAiC,UAAU9C,IAAV,EAAgBC,GAAhB,EAAqBS,UAArB,EAAiCR,WAAjC,EAA8CC,IAA9C,EAAoD;AACnF,QAAIU,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;AACA,QAAIc,WAAW,GAAGvC,IAAI,CAACwC,SAAvB;AACA,QAAIY,iBAAJ;AACA,QAAIC,aAAJ;AACA,QAAIC,eAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,SAAJ;AACA,QAAIC,gBAAJ;AACA,QAAIC,iBAAJ;AACA,QAAIC,UAAJ;AACA,QAAIC,WAAJ;;AAEA,QAAI1D,WAAJ,EAAiB;AACfkD,MAAAA,iBAAiB,GAAGlD,WAAW,CAACkD,iBAAhC;AACAC,MAAAA,aAAa,GAAGnD,WAAW,CAACmD,aAA5B;AACAC,MAAAA,eAAe,GAAGpD,WAAW,CAACoD,eAA9B;AACAC,MAAAA,KAAK,GAAGrD,WAAW,CAACqD,KAApB;AACAC,MAAAA,SAAS,GAAGtD,WAAW,CAACsD,SAAxB;AACAE,MAAAA,iBAAiB,GAAGxD,WAAW,CAACwD,iBAAhC;AACAC,MAAAA,UAAU,GAAGzD,WAAW,CAACyD,UAAzB;AACAC,MAAAA,WAAW,GAAG1D,WAAW,CAAC0D,WAA1B;AACAH,MAAAA,gBAAgB,GAAGvD,WAAW,CAACuD,gBAA/B;AACD;;AAED,QAAI,CAACvD,WAAD,IAAgBF,IAAI,CAAC6D,aAAzB,EAAwC;AACtC,UAAIC,SAAS,GAAG5D,WAAW,IAAIA,WAAW,CAAC4D,SAA3B,GAAuC5D,WAAW,CAAC4D,SAAnD,GAA+D9D,IAAI,CAAC+D,YAAL,CAAkB9D,GAAlB,CAA/E;AACA,UAAI+D,aAAa,GAAGF,SAAS,CAACG,QAAV,CAAmB,UAAnB,CAApB;AACAb,MAAAA,iBAAiB,GAAGY,aAAa,CAACC,QAAd,CAAuB,WAAvB,EAAoCC,YAApC,EAApB;AACAZ,MAAAA,eAAe,GAAGQ,SAAS,CAACG,QAAV,CAAmB,CAAC,QAAD,EAAW,WAAX,CAAnB,EAA4CC,YAA5C,EAAlB;AACAb,MAAAA,aAAa,GAAGS,SAAS,CAACG,QAAV,CAAmB,CAAC,MAAD,EAAS,WAAT,CAAnB,EAA0CC,YAA1C,EAAhB;AACAX,MAAAA,KAAK,GAAGS,aAAa,CAACG,GAAd,CAAkB,OAAlB,CAAR;AACAX,MAAAA,SAAS,GAAGQ,aAAa,CAACG,GAAd,CAAkB,WAAlB,CAAZ;AACAV,MAAAA,gBAAgB,GAAGO,aAAa,CAACG,GAAd,CAAkB,UAAlB,CAAnB;AACAT,MAAAA,iBAAiB,GAAG/D,oBAAoB,CAACmE,SAAD,CAAxC;AACAH,MAAAA,UAAU,GAAGK,aAAa,CAACI,UAAd,CAAyB,OAAzB,CAAb;AACAR,MAAAA,WAAW,GAAGE,SAAS,CAACM,UAAV,CAAqB,QAArB,CAAd;AACD;;AAED,QAAIC,YAAY,GAAGrE,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,cAAxB,CAAnB;AACAY,IAAAA,UAAU,CAACC,IAAX,CAAgB,UAAhB,EAA4B,CAACuD,YAAY,IAAI,CAAjB,IAAsBC,IAAI,CAACC,EAA3B,GAAgC,GAAhC,IAAuC,CAAnE;AACA,QAAIC,YAAY,GAAGxF,qBAAqB,CAACgB,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,cAAxB,CAAD,EAA0CS,UAA1C,CAAxC;;AAEA,QAAI8D,YAAJ,EAAkB;AAChB3D,MAAAA,UAAU,CAAC4D,CAAX,GAAeD,YAAY,CAAC,CAAD,CAA3B;AACA3D,MAAAA,UAAU,CAAC6D,CAAX,GAAeF,YAAY,CAAC,CAAD,CAA3B;AACD;;AAEDZ,IAAAA,WAAW,IAAI/C,UAAU,CAACC,IAAX,CAAgB,QAAhB,EAA0B8C,WAA1B,CAAf;AACA,QAAIe,WAAW,GAAG3E,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,OAAxB,CAAlB;AACA,QAAI2E,WAAW,GAAGD,WAAW,CAACE,IAA9B;;AAEA,QAAIhE,UAAU,YAAYjB,OAA1B,EAAmC;AACjC,UAAIkF,SAAS,GAAGjE,UAAU,CAACoC,KAA3B;AACApC,MAAAA,UAAU,CAACkE,QAAX,CAAoBvF,MAAM,CAAC;AACzB;AACAwF,QAAAA,KAAK,EAAEF,SAAS,CAACE,KAFQ;AAGzBP,QAAAA,CAAC,EAAEK,SAAS,CAACL,CAHY;AAIzBC,QAAAA,CAAC,EAAEI,SAAS,CAACJ,CAJY;AAKzBO,QAAAA,KAAK,EAAEH,SAAS,CAACG,KALQ;AAMzBC,QAAAA,MAAM,EAAEJ,SAAS,CAACI;AANO,OAAD,EAOvBP,WAPuB,CAA1B;AAQD,KAVD,MAUO;AACL,UAAI9D,UAAU,CAACsE,cAAf,EAA+B;AAC7B;AACA;AACA;AACAtE,QAAAA,UAAU,CAACkE,QAAX,CAAoBvF,MAAM,CAAC,EAAD,EAAKmF,WAAL,CAA1B;AACD,OALD,MAKO;AACL9D,QAAAA,UAAU,CAACkE,QAAX,CAAoBJ,WAApB;AACD,OARI,CAQH;;;AAGF9D,MAAAA,UAAU,CAACoC,KAAX,CAAiBmC,KAAjB,GAAyB,IAAzB;AACAvE,MAAAA,UAAU,CAACwE,QAAX,CAAoBT,WAApB,EAAiCzE,IAAI,IAAIA,IAAI,CAACmF,gBAA9C;AACAzE,MAAAA,UAAU,CAACoC,KAAX,CAAiBsC,aAAjB,GAAiC,IAAjC;AACD;;AAED,QAAIC,KAAK,GAAGxF,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,OAAxB,CAAZ;AACA,QAAIwF,QAAQ,GAAG,KAAKC,GAApB;;AAEA,QAAIF,KAAK,IAAI,IAAb,EAAmB;AACjB,UAAIC,QAAQ,IAAI,IAAhB,EAAsB;AACpB,aAAKC,GAAL,GAAW7E,UAAU,CAACE,EAAtB;AACAF,QAAAA,UAAU,CAACE,EAAX,IAAiByE,KAAjB;AACD;AACF,KALD,MAKO,IAAIC,QAAQ,IAAI,IAAhB,EAAsB;AAC3B5E,MAAAA,UAAU,CAACE,EAAX,GAAgB0E,QAAhB;AACA,WAAKC,GAAL,GAAW,IAAX;AACD;;AAED,QAAIC,YAAY,GAAGxF,IAAI,IAAIA,IAAI,CAACwF,YAAhC;AACAjG,IAAAA,aAAa,CAACmB,UAAD,EAAa6C,iBAAb,EAAgC;AAC3CkC,MAAAA,YAAY,EAAErD,WAD6B;AAE3CsD,MAAAA,cAAc,EAAE5F,GAF2B;AAG3C6F,MAAAA,WAAW,EAAEC,mBAH8B;AAI3CC,MAAAA,YAAY,EAAEpB,WAJ6B;AAK3CqB,MAAAA,cAAc,EAAEtB,WAAW,CAACzB;AALe,KAAhC,CAAb,CA5FmF,CAkG/E;;AAEJ,aAAS6C,mBAAT,CAA6B9F,GAA7B,EAAkC;AAChC,aAAO0F,YAAY,GAAG3F,IAAI,CAACkG,OAAL,CAAajG,GAAb,CAAH,GAAuBV,eAAe,CAACS,IAAD,EAAOC,GAAP,CAAzD;AACD;;AAED,SAAK8C,MAAL,GAAcrC,UAAU,CAAC,CAAD,CAAV,GAAgB,CAA9B;AACA,SAAKsC,MAAL,GAActC,UAAU,CAAC,CAAD,CAAV,GAAgB,CAA9B;AACA,QAAIyF,aAAa,GAAGtF,UAAU,CAACuF,WAAX,CAAuB,UAAvB,CAApB;AACAD,IAAAA,aAAa,CAAClD,KAAd,GAAsBG,iBAAtB;AACAvC,IAAAA,UAAU,CAACuF,WAAX,CAAuB,QAAvB,EAAiCnD,KAAjC,GAAyCK,eAAzC;AACAzC,IAAAA,UAAU,CAACuF,WAAX,CAAuB,MAAvB,EAA+BnD,KAA/B,GAAuCI,aAAvC;;AAEA,QAAIM,UAAJ,EAAgB;AACd,UAAI0C,UAAU,GAAG/B,IAAI,CAACgC,GAAL,CAAS7G,QAAQ,CAACkE,UAAD,CAAR,GAAuBA,UAAvB,GAAoC,GAA7C,EAAkD,IAAI,KAAKX,MAA3D,CAAjB;AACAmD,MAAAA,aAAa,CAAClF,MAAd,GAAuB,KAAK8B,MAAL,GAAcsD,UAArC;AACAF,MAAAA,aAAa,CAACjF,MAAd,GAAuB,KAAK8B,MAAL,GAAcqD,UAArC;AACD;;AAED,SAAKE,cAAL,CAAoB,CAApB;AACAjH,IAAAA,mBAAmB,CAAC,IAAD,EAAOiE,KAAP,EAAcC,SAAd,EAAyBC,gBAAzB,CAAnB;AACD,GAvHD;;AAyHA3D,EAAAA,QAAM,CAACS,SAAP,CAAiBgG,cAAjB,GAAkC,UAAUC,KAAV,EAAiB;AACjD,SAAKvF,MAAL,GAAc,KAAKC,MAAL,GAAcsF,KAA5B;AACD,GAFD;;AAIA1G,EAAAA,QAAM,CAACS,SAAP,CAAiBkG,OAAjB,GAA2B,UAAUC,EAAV,EAAcnE,WAAd,EAA2BoE,GAA3B,EAAgC;AACzD,QAAI9F,UAAU,GAAG,KAAKY,OAAL,CAAa,CAAb,CAAjB;AACA,QAAImF,SAAS,GAAGzH,SAAS,CAAC,IAAD,CAAT,CAAgByH,SAAhC;AACA,QAAIC,YAAY,GAAGF,GAAG,IAAIA,GAAG,CAACG,SAA9B,CAHyD,CAGhB;;AAEzC,SAAKzE,MAAL,GAAcxB,UAAU,CAACwB,MAAX,GAAoB,IAAlC,CALyD,CAKjB;;AAExC,QAAIsE,GAAG,IAAIA,GAAG,CAACI,SAAf,EAA0B;AACxB,UAAIC,WAAW,GAAGnG,UAAU,CAACoG,cAAX,EAAlB;;AAEA,UAAID,WAAJ,EAAiB;AACf9H,QAAAA,OAAO,CAACgI,aAAR,CAAsBF,WAAtB,EAAmC;AACjC/D,UAAAA,KAAK,EAAE;AACLC,YAAAA,OAAO,EAAE;AADJ;AAD0B,SAAnC,EAIGX,WAJH,EAIgB;AACdqE,UAAAA,SAAS,EAAEA,SADG;AAEdO,UAAAA,SAAS,EAAEN,YAFG;AAGdH,UAAAA,EAAE,EAAE,cAAY;AACd7F,YAAAA,UAAU,CAACuG,iBAAX;AACD;AALa,SAJhB;AAWD;AACF,KAhBD,MAgBO;AACLvG,MAAAA,UAAU,CAACuG,iBAAX;AACD;;AAEDlI,IAAAA,OAAO,CAACgI,aAAR,CAAsBrG,UAAtB,EAAkC;AAChCoC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAE;AADJ,OADyB;AAIhCjC,MAAAA,MAAM,EAAE,CAJwB;AAKhCC,MAAAA,MAAM,EAAE;AALwB,KAAlC,EAMGqB,WANH,EAMgB;AACdqE,MAAAA,SAAS,EAAEA,SADG;AAEdF,MAAAA,EAAE,EAAEA,EAFU;AAGdS,MAAAA,SAAS,EAAEN;AAHG,KANhB;AAWD,GAtCD;;AAwCA/G,EAAAA,QAAM,CAAC2C,aAAP,GAAuB,UAAUzC,IAAV,EAAgBC,GAAhB,EAAqB;AAC1C,WAAOhB,mBAAmB,CAACe,IAAI,CAACsC,aAAL,CAAmBrC,GAAnB,EAAwB,YAAxB,CAAD,CAA1B;AACD,GAFD;;AAIA,SAAOH,QAAP;AACD,CA5TD,CA4TEZ,OAAO,CAACmI,KA5TV,CAFA;;AAgUA,SAASjG,WAAT,CAAqBkG,EAArB,EAAyBC,EAAzB,EAA6B;AAC3B,OAAKC,MAAL,CAAYrG,KAAZ,CAAkBmG,EAAlB,EAAsBC,EAAtB;AACD;;AAED,eAAezH,OAAf","sourcesContent":["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\r\nimport { getDefaultLabel } from './labelHelper.js';\r\nimport { extend, isNumber } from 'zrender/lib/core/util.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport ZRImage from 'zrender/lib/graphic/Image.js';\r\nimport { saveOldStyle } from '../../animation/basicTrasition.js';\r\n\r\nvar Symbol =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(Symbol, _super);\r\n\r\n  function Symbol(data, idx, seriesScope, opts) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this.updateData(data, idx, seriesScope, opts);\r\n\r\n    return _this;\r\n  }\r\n\r\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\r\n    // Remove paths created before\r\n    this.removeAll(); // let symbolPath = createSymbol(\r\n    //     symbolType, -0.5, -0.5, 1, 1, color\r\n    // );\r\n    // If width/height are set too small (e.g., set to 1) on ios10\r\n    // and macOS Sierra, a circle stroke become a rect, no matter what\r\n    // the scale is set. So we set width/height as 2. See #4150.\r\n\r\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\r\n    symbolPath.attr({\r\n      z2: 100,\r\n      culling: true,\r\n      scaleX: symbolSize[0] / 2,\r\n      scaleY: symbolSize[1] / 2\r\n    }); // Rewrite drift method\r\n\r\n    symbolPath.drift = driftSymbol;\r\n    this._symbolType = symbolType;\r\n    this.add(symbolPath);\r\n  };\r\n  /**\r\n   * Stop animation\r\n   * @param {boolean} toLastFrame\r\n   */\r\n\r\n\r\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\r\n    this.childAt(0).stopAnimation(null, toLastFrame);\r\n  };\r\n\r\n  Symbol.prototype.getSymbolType = function () {\r\n    return this._symbolType;\r\n  };\r\n  /**\r\n   * FIXME:\r\n   * Caution: This method breaks the encapsulation of this module,\r\n   * but it indeed brings convenience. So do not use the method\r\n   * unless you detailedly know all the implements of `Symbol`,\r\n   * especially animation.\r\n   *\r\n   * Get symbol path element.\r\n   */\r\n\r\n\r\n  Symbol.prototype.getSymbolPath = function () {\r\n    return this.childAt(0);\r\n  };\r\n  /**\r\n   * Highlight symbol\r\n   */\r\n\r\n\r\n  Symbol.prototype.highlight = function () {\r\n    enterEmphasis(this.childAt(0));\r\n  };\r\n  /**\r\n   * Downplay symbol\r\n   */\r\n\r\n\r\n  Symbol.prototype.downplay = function () {\r\n    leaveEmphasis(this.childAt(0));\r\n  };\r\n  /**\r\n   * @param {number} zlevel\r\n   * @param {number} z\r\n   */\r\n\r\n\r\n  Symbol.prototype.setZ = function (zlevel, z) {\r\n    var symbolPath = this.childAt(0);\r\n    symbolPath.zlevel = zlevel;\r\n    symbolPath.z = z;\r\n  };\r\n\r\n  Symbol.prototype.setDraggable = function (draggable) {\r\n    var symbolPath = this.childAt(0);\r\n    symbolPath.draggable = draggable;\r\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\r\n  };\r\n  /**\r\n   * Update symbol properties\r\n   */\r\n\r\n\r\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\r\n    this.silent = false;\r\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\r\n    var seriesModel = data.hostModel;\r\n    var symbolSize = Symbol.getSymbolSize(data, idx);\r\n    var isInit = symbolType !== this._symbolType;\r\n    var disableAnimation = opts && opts.disableAnimation;\r\n\r\n    if (isInit) {\r\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\r\n\r\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\r\n    } else {\r\n      var symbolPath = this.childAt(0);\r\n      symbolPath.silent = false;\r\n      var target = {\r\n        scaleX: symbolSize[0] / 2,\r\n        scaleY: symbolSize[1] / 2\r\n      };\r\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\r\n      saveOldStyle(symbolPath);\r\n    }\r\n\r\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\r\n\r\n    if (isInit) {\r\n      var symbolPath = this.childAt(0);\r\n\r\n      if (!disableAnimation) {\r\n        var target = {\r\n          scaleX: this._sizeX,\r\n          scaleY: this._sizeY,\r\n          style: {\r\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\r\n            opacity: symbolPath.style.opacity\r\n          }\r\n        };\r\n        symbolPath.scaleX = symbolPath.scaleY = 0;\r\n        symbolPath.style.opacity = 0;\r\n        graphic.initProps(symbolPath, target, seriesModel, idx);\r\n      }\r\n    }\r\n\r\n    if (disableAnimation) {\r\n      // Must stop leave transition manually if don't call initProps or updateProps.\r\n      this.childAt(0).stopAnimation('leave');\r\n    }\r\n  };\r\n\r\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\r\n    var symbolPath = this.childAt(0);\r\n    var seriesModel = data.hostModel;\r\n    var emphasisItemStyle;\r\n    var blurItemStyle;\r\n    var selectItemStyle;\r\n    var focus;\r\n    var blurScope;\r\n    var emphasisDisabled;\r\n    var labelStatesModels;\r\n    var hoverScale;\r\n    var cursorStyle;\r\n\r\n    if (seriesScope) {\r\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\r\n      blurItemStyle = seriesScope.blurItemStyle;\r\n      selectItemStyle = seriesScope.selectItemStyle;\r\n      focus = seriesScope.focus;\r\n      blurScope = seriesScope.blurScope;\r\n      labelStatesModels = seriesScope.labelStatesModels;\r\n      hoverScale = seriesScope.hoverScale;\r\n      cursorStyle = seriesScope.cursorStyle;\r\n      emphasisDisabled = seriesScope.emphasisDisabled;\r\n    }\r\n\r\n    if (!seriesScope || data.hasItemOption) {\r\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\r\n      var emphasisModel = itemModel.getModel('emphasis');\r\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\r\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n      focus = emphasisModel.get('focus');\r\n      blurScope = emphasisModel.get('blurScope');\r\n      emphasisDisabled = emphasisModel.get('disabled');\r\n      labelStatesModels = getLabelStatesModels(itemModel);\r\n      hoverScale = emphasisModel.getShallow('scale');\r\n      cursorStyle = itemModel.getShallow('cursor');\r\n    }\r\n\r\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\r\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\r\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\r\n\r\n    if (symbolOffset) {\r\n      symbolPath.x = symbolOffset[0];\r\n      symbolPath.y = symbolOffset[1];\r\n    }\r\n\r\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\r\n    var symbolStyle = data.getItemVisual(idx, 'style');\r\n    var visualColor = symbolStyle.fill;\r\n\r\n    if (symbolPath instanceof ZRImage) {\r\n      var pathStyle = symbolPath.style;\r\n      symbolPath.useStyle(extend({\r\n        // TODO other properties like x, y ?\r\n        image: pathStyle.image,\r\n        x: pathStyle.x,\r\n        y: pathStyle.y,\r\n        width: pathStyle.width,\r\n        height: pathStyle.height\r\n      }, symbolStyle));\r\n    } else {\r\n      if (symbolPath.__isEmptyBrush) {\r\n        // fill and stroke will be swapped if it's empty.\r\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\r\n        // TODO Better implementation. No empty logic!\r\n        symbolPath.useStyle(extend({}, symbolStyle));\r\n      } else {\r\n        symbolPath.useStyle(symbolStyle);\r\n      } // Disable decal because symbol scale will been applied on the decal.\r\n\r\n\r\n      symbolPath.style.decal = null;\r\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\r\n      symbolPath.style.strokeNoScale = true;\r\n    }\r\n\r\n    var liftZ = data.getItemVisual(idx, 'liftZ');\r\n    var z2Origin = this._z2;\r\n\r\n    if (liftZ != null) {\r\n      if (z2Origin == null) {\r\n        this._z2 = symbolPath.z2;\r\n        symbolPath.z2 += liftZ;\r\n      }\r\n    } else if (z2Origin != null) {\r\n      symbolPath.z2 = z2Origin;\r\n      this._z2 = null;\r\n    }\r\n\r\n    var useNameLabel = opts && opts.useNameLabel;\r\n    setLabelStyle(symbolPath, labelStatesModels, {\r\n      labelFetcher: seriesModel,\r\n      labelDataIndex: idx,\r\n      defaultText: getLabelDefaultText,\r\n      inheritColor: visualColor,\r\n      defaultOpacity: symbolStyle.opacity\r\n    }); // Do not execute util needed.\r\n\r\n    function getLabelDefaultText(idx) {\r\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\r\n    }\r\n\r\n    this._sizeX = symbolSize[0] / 2;\r\n    this._sizeY = symbolSize[1] / 2;\r\n    var emphasisState = symbolPath.ensureState('emphasis');\r\n    emphasisState.style = emphasisItemStyle;\r\n    symbolPath.ensureState('select').style = selectItemStyle;\r\n    symbolPath.ensureState('blur').style = blurItemStyle;\r\n\r\n    if (hoverScale) {\r\n      var scaleRatio = Math.max(isNumber(hoverScale) ? hoverScale : 1.1, 3 / this._sizeY);\r\n      emphasisState.scaleX = this._sizeX * scaleRatio;\r\n      emphasisState.scaleY = this._sizeY * scaleRatio;\r\n    }\r\n\r\n    this.setSymbolScale(1);\r\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\r\n  };\r\n\r\n  Symbol.prototype.setSymbolScale = function (scale) {\r\n    this.scaleX = this.scaleY = scale;\r\n  };\r\n\r\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\r\n    var symbolPath = this.childAt(0);\r\n    var dataIndex = getECData(this).dataIndex;\r\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\r\n\r\n    this.silent = symbolPath.silent = true; // Not show text when animating\r\n\r\n    if (opt && opt.fadeLabel) {\r\n      var textContent = symbolPath.getTextContent();\r\n\r\n      if (textContent) {\r\n        graphic.removeElement(textContent, {\r\n          style: {\r\n            opacity: 0\r\n          }\r\n        }, seriesModel, {\r\n          dataIndex: dataIndex,\r\n          removeOpt: animationOpt,\r\n          cb: function () {\r\n            symbolPath.removeTextContent();\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      symbolPath.removeTextContent();\r\n    }\r\n\r\n    graphic.removeElement(symbolPath, {\r\n      style: {\r\n        opacity: 0\r\n      },\r\n      scaleX: 0,\r\n      scaleY: 0\r\n    }, seriesModel, {\r\n      dataIndex: dataIndex,\r\n      cb: cb,\r\n      removeOpt: animationOpt\r\n    });\r\n  };\r\n\r\n  Symbol.getSymbolSize = function (data, idx) {\r\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\r\n  };\r\n\r\n  return Symbol;\r\n}(graphic.Group);\r\n\r\nfunction driftSymbol(dx, dy) {\r\n  this.parent.drift(dx, dy);\r\n}\r\n\r\nexport default Symbol;"]},"metadata":{},"sourceType":"module"}