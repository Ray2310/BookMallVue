{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.typed-array.uint32-array.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.copy-within.js\";\nimport \"core-js/modules/es.typed-array.every.js\";\nimport \"core-js/modules/es.typed-array.fill.js\";\nimport \"core-js/modules/es.typed-array.filter.js\";\nimport \"core-js/modules/es.typed-array.find.js\";\nimport \"core-js/modules/es.typed-array.find-index.js\";\nimport \"core-js/modules/es.typed-array.for-each.js\";\nimport \"core-js/modules/es.typed-array.includes.js\";\nimport \"core-js/modules/es.typed-array.index-of.js\";\nimport \"core-js/modules/es.typed-array.iterator.js\";\nimport \"core-js/modules/es.typed-array.join.js\";\nimport \"core-js/modules/es.typed-array.last-index-of.js\";\nimport \"core-js/modules/es.typed-array.map.js\";\nimport \"core-js/modules/es.typed-array.reduce.js\";\nimport \"core-js/modules/es.typed-array.reduce-right.js\";\nimport \"core-js/modules/es.typed-array.reverse.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/es.typed-array.slice.js\";\nimport \"core-js/modules/es.typed-array.some.js\";\nimport \"core-js/modules/es.typed-array.sort.js\";\nimport \"core-js/modules/es.typed-array.subarray.js\";\nimport \"core-js/modules/es.typed-array.to-locale-string.js\";\nimport \"core-js/modules/es.typed-array.to-string.js\";\nimport \"core-js/modules/es.typed-array.float64-array.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.typed-array.float32-array.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.join.js\";\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\n\nimport SeriesModel from '../../model/Series.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LinesSeriesModel, _super);\n\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\n\n    compatEc2(option);\n\n    var result = this._processFlatCoordsArray(option.data);\n\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n\n    _super.prototype.init.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n\n      params.data = new Float32Array(result.count);\n    }\n\n    this.getRawData().appendData(params.data);\n  };\n\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n\n    return coords;\n  };\n\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n\n      return coords.length;\n    }\n  };\n\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    } // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n\n\n    if (isNumber(data[0])) {\n      var len = data.length; // Store offset and len of each segment\n\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++]; // Offset\n\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\n\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n\n      if (!CoordSys) {\n        throw new Error('Unkown coordinate system ' + option.coordinateSystem);\n      }\n    }\n\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  LinesSeriesModel.prototype.getZLevelKey = function () {\n    var effectModel = this.getModel('effect');\n    var trailLength = effectModel.get('trailLength');\n    return this.getData().count() > this.getProgressiveThreshold() // Each progressive series has individual key.\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\n  };\n\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end' // distance: 5,\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\n\nexport default LinesSeriesModel;","map":{"version":3,"sources":["D:/Work/WorkSpace/GitWorkSpace/TenShop/resource/ElectronicMall/src/qingge-Market/qingge-vue/node_modules/echarts/lib/chart/lines/LinesSeries.js"],"names":["__extends","SeriesModel","SeriesData","concatArray","mergeAll","map","isNumber","CoordinateSystem","createTooltipMarkup","Uint32Arr","Uint32Array","Array","Float64Arr","Float64Array","compatEc2","seriesOpt","data","coord","process","env","NODE_ENV","console","warn","itemOpt","coords","target","name","fromName","toName","LinesSeriesModel","_super","_this","apply","arguments","type","visualStyleAccessPath","visualDrawType","prototype","init","option","result","_processFlatCoordsArray","_flatCoords","flatCoords","_flatCoordsOffset","flatCoordsOffset","Float32Array","count","mergeOption","appendData","params","getRawData","_getCoordsFromItemModel","idx","itemModel","getData","getItemModel","getShallow","length","Error","JSON","stringify","getLineCoordsCount","getLineCoords","out","offset","len","i","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","k","x","y","buffer","getInitialData","ecModel","CoordSys","get","coordinateSystem","lineData","hasItemOption","initData","dataItem","dimName","dataIndex","dimIndex","NaN","value","formatTooltip","multipleSeries","dataType","nameArr","push","join","preventIncremental","getProgressive","progressive","large","getProgressiveThreshold","progressiveThreshold","getZLevelKey","effectModel","getModel","trailLength","id","dependencies","defaultOption","z","legendHoverLink","xAxisIndex","yAxisIndex","symbol","symbolSize","geoIndex","effect","show","period","constantSpeed","loop","largeThreshold","polyline","clip","label","position","lineStyle","opacity"],"mappings":"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","sourcesContent":["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/* global Uint32Array, Float64Array, Float32Array */\r\n\r\nimport SeriesModel from '../../model/Series.js';\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\r\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\r\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\r\n\r\nfunction compatEc2(seriesOpt) {\r\n  var data = seriesOpt.data;\r\n\r\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\r\n    }\r\n\r\n    seriesOpt.data = map(data, function (itemOpt) {\r\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\r\n      var target = {\r\n        coords: coords\r\n      };\r\n\r\n      if (itemOpt[0].name) {\r\n        target.fromName = itemOpt[0].name;\r\n      }\r\n\r\n      if (itemOpt[1].name) {\r\n        target.toName = itemOpt[1].name;\r\n      }\r\n\r\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\r\n    });\r\n  }\r\n}\r\n\r\nvar LinesSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LinesSeriesModel, _super);\r\n\r\n  function LinesSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = LinesSeriesModel.type;\r\n    _this.visualStyleAccessPath = 'lineStyle';\r\n    _this.visualDrawType = 'stroke';\r\n    return _this;\r\n  }\r\n\r\n  LinesSeriesModel.prototype.init = function (option) {\r\n    // The input data may be null/undefined.\r\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\r\n\r\n    compatEc2(option);\r\n\r\n    var result = this._processFlatCoordsArray(option.data);\r\n\r\n    this._flatCoords = result.flatCoords;\r\n    this._flatCoordsOffset = result.flatCoordsOffset;\r\n\r\n    if (result.flatCoords) {\r\n      option.data = new Float32Array(result.count);\r\n    }\r\n\r\n    _super.prototype.init.apply(this, arguments);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.mergeOption = function (option) {\r\n    compatEc2(option);\r\n\r\n    if (option.data) {\r\n      // Only update when have option data to merge.\r\n      var result = this._processFlatCoordsArray(option.data);\r\n\r\n      this._flatCoords = result.flatCoords;\r\n      this._flatCoordsOffset = result.flatCoordsOffset;\r\n\r\n      if (result.flatCoords) {\r\n        option.data = new Float32Array(result.count);\r\n      }\r\n    }\r\n\r\n    _super.prototype.mergeOption.apply(this, arguments);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.appendData = function (params) {\r\n    var result = this._processFlatCoordsArray(params.data);\r\n\r\n    if (result.flatCoords) {\r\n      if (!this._flatCoords) {\r\n        this._flatCoords = result.flatCoords;\r\n        this._flatCoordsOffset = result.flatCoordsOffset;\r\n      } else {\r\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\r\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\r\n      }\r\n\r\n      params.data = new Float32Array(result.count);\r\n    }\r\n\r\n    this.getRawData().appendData(params.data);\r\n  };\r\n\r\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\r\n    var itemModel = this.getData().getItemModel(idx);\r\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\r\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\r\n      }\r\n    }\r\n\r\n    return coords;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\r\n    if (this._flatCoordsOffset) {\r\n      return this._flatCoordsOffset[idx * 2 + 1];\r\n    } else {\r\n      return this._getCoordsFromItemModel(idx).length;\r\n    }\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\r\n    if (this._flatCoordsOffset) {\r\n      var offset = this._flatCoordsOffset[idx * 2];\r\n      var len = this._flatCoordsOffset[idx * 2 + 1];\r\n\r\n      for (var i = 0; i < len; i++) {\r\n        out[i] = out[i] || [];\r\n        out[i][0] = this._flatCoords[offset + i * 2];\r\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\r\n      }\r\n\r\n      return len;\r\n    } else {\r\n      var coords = this._getCoordsFromItemModel(idx);\r\n\r\n      for (var i = 0; i < coords.length; i++) {\r\n        out[i] = out[i] || [];\r\n        out[i][0] = coords[i][0];\r\n        out[i][1] = coords[i][1];\r\n      }\r\n\r\n      return coords.length;\r\n    }\r\n  };\r\n\r\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\r\n    var startOffset = 0;\r\n\r\n    if (this._flatCoords) {\r\n      startOffset = this._flatCoords.length;\r\n    } // Stored as a typed array. In format\r\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\r\n\r\n\r\n    if (isNumber(data[0])) {\r\n      var len = data.length; // Store offset and len of each segment\r\n\r\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\r\n      var coordsStorage = new Float64Arr(len);\r\n      var coordsCursor = 0;\r\n      var offsetCursor = 0;\r\n      var dataCount = 0;\r\n\r\n      for (var i = 0; i < len;) {\r\n        dataCount++;\r\n        var count = data[i++]; // Offset\r\n\r\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\r\n\r\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\r\n\r\n        for (var k = 0; k < count; k++) {\r\n          var x = data[i++];\r\n          var y = data[i++];\r\n          coordsStorage[coordsCursor++] = x;\r\n          coordsStorage[coordsCursor++] = y;\r\n\r\n          if (i > len) {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n              throw new Error('Invalid data format.');\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return {\r\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\r\n        flatCoords: coordsStorage,\r\n        count: dataCount\r\n      };\r\n    }\r\n\r\n    return {\r\n      flatCoordsOffset: null,\r\n      flatCoords: null,\r\n      count: data.length\r\n    };\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\r\n\r\n      if (!CoordSys) {\r\n        throw new Error('Unkown coordinate system ' + option.coordinateSystem);\r\n      }\r\n    }\r\n\r\n    var lineData = new SeriesData(['value'], this);\r\n    lineData.hasItemOption = false;\r\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\r\n      // dataItem is simply coords\r\n      if (dataItem instanceof Array) {\r\n        return NaN;\r\n      } else {\r\n        lineData.hasItemOption = true;\r\n        var value = dataItem.value;\r\n\r\n        if (value != null) {\r\n          return value instanceof Array ? value[dimIndex] : value;\r\n        }\r\n      }\r\n    });\r\n    return lineData;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var data = this.getData();\r\n    var itemModel = data.getItemModel(dataIndex);\r\n    var name = itemModel.get('name');\r\n\r\n    if (name) {\r\n      return name;\r\n    }\r\n\r\n    var fromName = itemModel.get('fromName');\r\n    var toName = itemModel.get('toName');\r\n    var nameArr = [];\r\n    fromName != null && nameArr.push(fromName);\r\n    toName != null && nameArr.push(toName);\r\n    return createTooltipMarkup('nameValue', {\r\n      name: nameArr.join(' > ')\r\n    });\r\n  };\r\n\r\n  LinesSeriesModel.prototype.preventIncremental = function () {\r\n    return !!this.get(['effect', 'show']);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getProgressive = function () {\r\n    var progressive = this.option.progressive;\r\n\r\n    if (progressive == null) {\r\n      return this.option.large ? 1e4 : this.get('progressive');\r\n    }\r\n\r\n    return progressive;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\r\n    var progressiveThreshold = this.option.progressiveThreshold;\r\n\r\n    if (progressiveThreshold == null) {\r\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\r\n    }\r\n\r\n    return progressiveThreshold;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getZLevelKey = function () {\r\n    var effectModel = this.getModel('effect');\r\n    var trailLength = effectModel.get('trailLength');\r\n    return this.getData().count() > this.getProgressiveThreshold() // Each progressive series has individual key.\r\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\r\n  };\r\n\r\n  LinesSeriesModel.type = 'series.lines';\r\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\r\n  LinesSeriesModel.defaultOption = {\r\n    coordinateSystem: 'geo',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    // Cartesian coordinate system\r\n    xAxisIndex: 0,\r\n    yAxisIndex: 0,\r\n    symbol: ['none', 'none'],\r\n    symbolSize: [10, 10],\r\n    // Geo coordinate system\r\n    geoIndex: 0,\r\n    effect: {\r\n      show: false,\r\n      period: 4,\r\n      constantSpeed: 0,\r\n      symbol: 'circle',\r\n      symbolSize: 3,\r\n      loop: true,\r\n      trailLength: 0.2\r\n    },\r\n    large: false,\r\n    // Available when large is true\r\n    largeThreshold: 2000,\r\n    polyline: false,\r\n    clip: true,\r\n    label: {\r\n      show: false,\r\n      position: 'end' // distance: 5,\r\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\r\n\r\n    },\r\n    lineStyle: {\r\n      opacity: 0.5\r\n    }\r\n  };\r\n  return LinesSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default LinesSeriesModel;"]},"metadata":{},"sourceType":"module"}