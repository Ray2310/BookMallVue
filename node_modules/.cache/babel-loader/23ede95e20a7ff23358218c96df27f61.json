{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '../../../utils/request';\nvar url = \"/api/carousel/\";\nexport default {\n  name: \"Carousel\",\n  data: function data() {\n    return {\n      baseApi: this.$store.state.baseApi,\n      options: [],\n      searchText: '',\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false\n    };\n  },\n  created: function created() {\n    this.load();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    load: function load() {\n      var _this = this;\n\n      API.get(url).then(function (res) {\n        _this.tableData = res.data || [];\n      });\n    },\n    add: function add() {\n      this.entity = {};\n      this.tableData.length++;\n      this.dialogFormVisible = true;\n    },\n    edit: function edit(row) {\n      this.entity = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    save: function save() {\n      var _this2 = this;\n\n      if (this.entity.goodId == undefined || this.entity.goodId === \"\") {\n        this.$message.error(\"商品id不能为空\");\n        return;\n      }\n\n      if (this.entity.showOrder == undefined) {\n        this.$message.error(\"轮播顺序不能为空\");\n        return;\n      }\n\n      API.post(url, this.entity).then(function (res) {\n        if (res.code === '200') {\n          _this2.$message.success(\"保存成功\");\n\n          _this2.load();\n\n          _this2.dialogFormVisible = false;\n        } else {\n          _this2.$message.error(res.msg);\n        }\n      });\n    },\n    del: function del(id) {\n      var _this3 = this;\n\n      API.delete(url + id).then(function (res) {\n        if (res.code === '200') {\n          _this3.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n\n          _this3.load();\n        } else {\n          _this3.$message.error(res.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AAEA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,wCADA;AAEAC,iBAFA;AAGAC,oBAHA;AAIAC,cAJA;AAKAC,mBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,gBARA;AASAC,cATA;AAUAC;AAVA;AAYA,GAfA;AAgBAC,SAhBA,qBAgBA;AACA;AACA,GAlBA;AAmBAC;AACAC,oBADA,4BACAN,QADA,EACA;AACA;AACA;AACA,KAJA;AAKAO,uBALA,+BAKAR,OALA,EAKA;AACA;AACA;AACA,KARA;AASAS,QATA,kBASA;AAAA;;AACAC;AACA;AACA,OAFA;AAGA,KAbA;AAcAC,OAdA,iBAcA;AACA;AACA;AACA;AACA,KAlBA;AAmBAC,QAnBA,gBAmBAC,GAnBA,EAmBA;AACA;AACA;AACA,KAtBA;AAuBAC,QAvBA,kBAuBA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AAEAJ;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA;AAEA,OATA;AAUA,KA3CA;AA4CAK,OA5CA,eA4CAC,EA5CA,EA4CA;AAAA;;AACAN;AACA;AACA;AACAO,2BADA;AAEAC;AAFA;;AAIA;AACA,SANA,MAMA;AACA;AACA;AACA,OAVA;AAWA;AAxDA;AAnBA","names":["name","data","baseApi","options","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","created","methods","handleSizeChange","handleCurrentChange","load","API","add","edit","row","save","del","id","type","message"],"sourceRoot":"src/views/manage/good","sources":["Carousel.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-table :data=\"tableData\" border stripe style=\"width: 80%;margin: 2px auto\">\r\n        <el-table-column label=\"商品\">\r\n          <template slot-scope=\"scope\">\r\n            <a :href=\"'/goodView/'+scope.row.goodId\">{{scope.row.goodName}}</a>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column  label=\"图片\" >\r\n          <template   slot-scope=\"scope\">\r\n            <img :src=\"baseApi + scope.row.img\" width=\"300\" height=\"185\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"showOrder\" label=\"轮播顺序\"></el-table-column>\r\n\r\n        <el-table-column\r\n            fixed=\"right\"\r\n            label=\"操作\"\r\n            width=\"250\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-a-032\"  @click=\"edit(scope.row)\">编辑</el-button>\r\n            <el-popconfirm\r\n                @confirm=\"del(scope.row.id)\"\r\n                title=\"确定删除？\"\r\n            >\r\n              <el-button type=\"danger\" icon=\"el-icon-a-022\" slot=\"reference\" style=\"margin-left: 10px\">删除</el-button>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n<!--新增按钮-->\r\n    <div style=\"text-align: center\">\r\n      <el-button @click=\"add\" type=\"primary\" style=\"margin: 30px;width: 150px; font-size: 20px;\">\r\n        <i class=\"el-icon-a-07\"></i>\r\n        新增\r\n      </el-button>\r\n    </div>\r\n    <!-- 弹窗   -->\r\n\r\n    <el-dialog title=\"信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\"\r\n               :close-on-click-modal=\"false\">\r\n      <el-form :model=\"entity\">\r\n        <el-form-item label=\"商品id\" label-width=\"150px\">\r\n          <el-input v-model=\"entity.goodId\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"轮播顺序\" label-width=\"150px\">\r\n<!--          <el-input v-model=\"entity.showOrder\" autocomplete=\"off\" style=\"width: 80%\"></el-input>-->\r\n          <el-select v-model=\"entity.showOrder\">\r\n            <el-option v-for=\"index in tableData.length\" :key=\"index\" :label=\"index\" :value=\"index\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../../../utils/request'\r\nconst url = \"/api/carousel/\"\r\n\r\nexport default {\r\n  name: \"Carousel\",\r\n  data() {\r\n    return {\r\n      baseApi: this.$store.state.baseApi,\r\n      options: [],\r\n      searchText: '',\r\n      user: {},\r\n      tableData: [],\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      entity: {},\r\n      total: 0,\r\n      dialogFormVisible: false\r\n    };\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    load() {\r\n      API.get(url).then(res => {\r\n        this.tableData = res.data || []\r\n      })\r\n    },\r\n    add() {\r\n      this.entity = {}\r\n      this.tableData.length++;\r\n      this.dialogFormVisible = true\r\n    },\r\n    edit(row) {\r\n      this.entity = JSON.parse(JSON.stringify(row))\r\n      this.dialogFormVisible = true\r\n    },\r\n    save() {\r\n      if(this.entity.goodId == undefined || this.entity.goodId === \"\") {\r\n          this.$message.error(\"商品id不能为空\")\r\n          return;\r\n      }\r\n      if(this.entity.showOrder == undefined) {\r\n          this.$message.error(\"轮播顺序不能为空\")\r\n          return;\r\n      }\r\n\r\n      API.post(url, this.entity).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"保存成功\")\r\n          this.load()\r\n          this.dialogFormVisible = false\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n\r\n      })\r\n    },\r\n    del(id) {\r\n      API.delete(url + id).then(res => {\r\n        if(res.code==='200'){\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功\",\r\n          });\r\n          this.load();\r\n        }else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}